[gd_resource type="BehaviorTree" load_steps=36 format=3 uid="uid://cjv4ymkskv57o"]

[ext_resource type="Script" path="res://ai/tasks/get_first_in_group.gd" id="1_q4t3n"]
[ext_resource type="Script" path="res://ai/tasks/face_target.gd" id="2_5ggci"]
[ext_resource type="Script" path="res://ai/tasks/select_target_pos.gd" id="2_b1xrh"]
[ext_resource type="Script" path="res://ai/tasks/arrive_pos.gd" id="3_c4le6"]
[ext_resource type="Script" path="res://ai/tasks/get_random_in_group.gd" id="4_sthyx"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_46tbn"]
var/speed/name = &"speed"
var/speed/type = 3
var/speed/value = 400.0
var/speed/hint = 1
var/speed/hint_string = "10,1000,10"

[sub_resource type="BBNode" id="BBNode_nrd4b"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_qiw21"]
animation_player = SubResource("BBNode_nrd4b")
animation_name = &"idle"
blend = 0.0

[sub_resource type="BTRandomWait" id="BTRandomWait_xlud8"]
min_duration = 2.0
max_duration = 3.0

[sub_resource type="BTSequence" id="BTSequence_yhjh1"]
custom_name = "Pause before action"
children = [SubResource("BTPlayAnimation_qiw21"), SubResource("BTRandomWait_xlud8")]

[sub_resource type="BTAction" id="BTAction_to68a"]
script = ExtResource("1_q4t3n")
group = &"item"
output_var = &"target"

[sub_resource type="BTAction" id="BTAction_f25l4"]
script = ExtResource("2_5ggci")
target_var = &"target"

[sub_resource type="BTRandomWait" id="BTRandomWait_6ejre"]
min_duration = 0.5
max_duration = 1.0

[sub_resource type="BTAction" id="BTAction_3h5pa"]
script = ExtResource("2_b1xrh")
target_var = &"target"
position_var = &"pos"

[sub_resource type="BBNode" id="BBNode_ki41o"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_ole2a"]
animation_player = SubResource("BBNode_ki41o")
animation_name = &"walk"
blend = 0.0

[sub_resource type="BTAction" id="BTAction_tk5gl"]
script = ExtResource("3_c4le6")
target_position_var = &"pos"
speed_var = &"speed"
tolerance = 12.0
avoid_var = &""

[sub_resource type="BTTimeLimit" id="BTTimeLimit_v7hoe"]
time_limit = 4.0
children = [SubResource("BTAction_tk5gl")]

[sub_resource type="BTInvert" id="BTInvert_m5l87"]
children = [SubResource("BTTimeLimit_v7hoe")]

[sub_resource type="BTSequence" id="BTSequence_h3bay"]
custom_name = "Go to first waypoint"
children = [SubResource("BTAction_to68a"), SubResource("BTAction_f25l4"), SubResource("BTRandomWait_6ejre"), SubResource("BTAction_3h5pa"), SubResource("BTPlayAnimation_ole2a"), SubResource("BTInvert_m5l87")]

[sub_resource type="BBNode" id="BBNode_tfnkj"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_yrvur"]
animation_player = SubResource("BBNode_tfnkj")
animation_name = &"idle"
blend = 0.0

[sub_resource type="BTRandomWait" id="BTRandomWait_ny4aw"]
min_duration = 2.0
max_duration = 3.0

[sub_resource type="BTSequence" id="BTSequence_2nn3h"]
custom_name = "Pause before action"
children = [SubResource("BTPlayAnimation_yrvur"), SubResource("BTRandomWait_ny4aw")]

[sub_resource type="BTAction" id="BTAction_ld8jy"]
script = ExtResource("4_sthyx")
group = &"waypoint"
output_var = &"target"

[sub_resource type="BTAction" id="BTAction_26w7b"]
script = ExtResource("2_5ggci")
target_var = &"target"

[sub_resource type="BTRandomWait" id="BTRandomWait_1vugh"]
min_duration = 0.5
max_duration = 1.0

[sub_resource type="BTAction" id="BTAction_y5wq6"]
script = ExtResource("2_b1xrh")
target_var = &"target"
position_var = &"pos"

[sub_resource type="BBNode" id="BBNode_tck37"]
saved_value = NodePath("AnimationPlayer")
resource_name = "AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_tnob7"]
animation_player = SubResource("BBNode_tck37")
animation_name = &"walk"
blend = 0.0

[sub_resource type="BTAction" id="BTAction_20dkx"]
script = ExtResource("3_c4le6")
target_position_var = &"pos"
speed_var = &"speed"
tolerance = 12.0
avoid_var = &""

[sub_resource type="BTTimeLimit" id="BTTimeLimit_e5ni7"]
time_limit = 3.0
children = [SubResource("BTAction_20dkx")]

[sub_resource type="BTInvert" id="BTInvert_nx5v7"]
children = [SubResource("BTTimeLimit_e5ni7")]

[sub_resource type="BTSequence" id="BTSequence_7tn35"]
custom_name = "Go to random waypoint"
children = [SubResource("BTAction_ld8jy"), SubResource("BTAction_26w7b"), SubResource("BTRandomWait_1vugh"), SubResource("BTAction_y5wq6"), SubResource("BTPlayAnimation_tnob7"), SubResource("BTInvert_nx5v7")]

[sub_resource type="BTSequence" id="BTSequence_pxl2k"]
children = [SubResource("BTSequence_yhjh1"), SubResource("BTSequence_h3bay"), SubResource("BTSequence_2nn3h"), SubResource("BTSequence_7tn35")]

[resource]
description = "

"
blackboard_plan = SubResource("BlackboardPlan_46tbn")
root_task = SubResource("BTSequence_pxl2k")
